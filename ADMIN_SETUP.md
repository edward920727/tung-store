# ç¨ç«‹å¾Œå°ç³»çµ±è¨­ç½®æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

å¾Œå°ç³»çµ±å·²ç¶“å®Œå…¨åˆ†é›¢åˆ°ç¨ç«‹çš„ `admin` ç›®éŒ„ï¼Œå¯ä»¥ç¨ç«‹éƒ¨ç½²å’Œé‹è¡Œã€‚

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. å®‰è£ä¾è³´

```bash
cd admin
npm install
```

### 2. é–‹ç™¼æ¨¡å¼

```bash
npm run dev
```

å¾Œå°æ‡‰ç”¨å°‡åœ¨ **http://localhost:3001** é‹è¡Œ

### 3. åŒæ™‚é‹è¡Œå‰å°å’Œå¾Œå°

åœ¨æ ¹ç›®éŒ„é‹è¡Œï¼š

```bash
# å®‰è£æ‰€æœ‰ä¾è³´ï¼ˆåŒ…æ‹¬ adminï¼‰
npm run install:all

# åŒæ™‚é‹è¡Œå‰å°å’Œå¾Œå°
npm run dev          # å‰å° (3000) + å¾Œå° (3001)
```

æˆ–è€…åˆ†åˆ¥é‹è¡Œï¼š

```bash
# çµ‚ç«¯ 1: å‰å°
cd client
npm run dev

# çµ‚ç«¯ 2: å¾Œå°
cd admin
npm run dev
```

## ğŸ“ ç›®éŒ„çµæ§‹

```
admin/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ pages/           # å¾Œå°é é¢
â”‚   â”‚   â”œâ”€â”€ Admin.tsx           # å„ªæƒ åˆ¸ã€æœƒå“¡ã€ç”¨æˆ¶ã€é¦–é é…ç½®
â”‚   â”‚   â”œâ”€â”€ AdminDashboard.tsx  # å„€è¡¨æ¿
â”‚   â”‚   â”œâ”€â”€ AdminOrders.tsx     # è¨‚å–®ç®¡ç†
â”‚   â”‚   â””â”€â”€ AdminProducts.tsx   # å•†å“ç®¡ç†
â”‚   â”œâ”€â”€ components/      # å¾Œå°çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ AdminLayout.tsx     # å¾Œå°å¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ ProtectedRoute.tsx  # è·¯ç”±å®ˆè¡›
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ config/          # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ firebase.ts         # Firebase é…ç½®
â”‚   â”œâ”€â”€ contexts/        # React Context
â”‚   â”‚   â””â”€â”€ AuthContext.tsx    # èªè­‰ä¸Šä¸‹æ–‡
â”‚   â”œâ”€â”€ services/        # æœå‹™å±¤
â”‚   â”‚   â””â”€â”€ firestore.ts       # Firestore æœå‹™
â”‚   â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•¸
â”‚   â”‚   â””â”€â”€ adminAuth.ts       # ç¸½éƒ¨é©—è­‰
â”‚   â”œâ”€â”€ App.tsx          # ä¸»æ‡‰ç”¨ï¼ˆåªåŒ…å«å¾Œå°è·¯ç”±ï¼‰
â”‚   â””â”€â”€ main.tsx         # å…¥å£æ–‡ä»¶
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.ts
â””â”€â”€ tsconfig.json
```

## ğŸ” æ¬Šé™æ§åˆ¶

### è¨ªå•æ§åˆ¶

- åªæœ‰ Firestore ä¸­ `users` é›†åˆçš„ `role === 'admin'` çš„ç”¨æˆ¶æ‰èƒ½è¨ªå•
- éç®¡ç†å“¡è¨ªå•æœƒé¡¯ç¤ºç©ºç™½é é¢
- æ”¯æŒç¸½éƒ¨é©—è­‰ï¼ˆé€šé URL tokenï¼‰

### è·¯ç”±ä¿è­·

æ‰€æœ‰å¾Œå°è·¯ç”±éƒ½é€šé `ProtectedRoute requireAdmin` ä¿è­·ï¼š

```tsx
<ProtectedRoute requireAdmin>
  <AdminLayout>
    {children}
  </AdminLayout>
</ProtectedRoute>
```

## ğŸŒ è·¯ç”±çµæ§‹

ç¨ç«‹å¾Œå°æ‡‰ç”¨çš„è·¯ç”±ï¼ˆç„¡ `/admin` å‰ç¶´ï¼‰ï¼š

- `/` - å„€è¡¨æ¿
- `/products` - å•†å“ç®¡ç†
- `/orders` - è¨‚å–®ç®¡ç†
- `/coupons` - å„ªæƒ åˆ¸ç®¡ç†
- `/membership` - æœƒå“¡ç­‰ç´š
- `/users` - æœƒå“¡ç®¡ç†
- `/homepage` - é¦–é è¨­è¨ˆ

## ğŸš¢ éƒ¨ç½²

### ç¨ç«‹éƒ¨ç½²

å¯ä»¥å°‡ `admin` ç›®éŒ„éƒ¨ç½²åˆ°ç¨ç«‹çš„åŸŸåï¼š

**å‰å°ï¼š**
- URL: `https://store.example.com`
- ç›®éŒ„: `client/`

**å¾Œå°ï¼š**
- URL: `https://admin.example.com`
- ç›®éŒ„: `admin/`

### æ§‹å»º

```bash
cd admin
npm run build
```

æ§‹å»ºå¾Œçš„æ–‡ä»¶åœ¨ `admin/dist` ç›®éŒ„ä¸­ã€‚

### Vercel éƒ¨ç½²

1. åœ¨ Vercel ä¸­å‰µå»ºæ–°é …ç›®
2. é¸æ“‡ `admin` ç›®éŒ„ä½œç‚ºæ ¹ç›®éŒ„
3. æ§‹å»ºå‘½ä»¤ï¼š`npm run build`
4. è¼¸å‡ºç›®éŒ„ï¼š`dist`

## âš™ï¸ ç’°å¢ƒè®Šé‡

å‰µå»º `admin/.env` æ–‡ä»¶ï¼š

```env
VITE_HEADQUARTERS_SECRET=your-secret-key-here
```

## ğŸ”„ èˆ‡å‰å°å…±äº«

å¾Œå°å’Œå‰å°å…±äº«ï¼š
- Firebase é…ç½®ï¼ˆç›¸åŒçš„ Firebase é …ç›®ï¼‰
- Firestore æ•¸æ“šåº«
- ç”¨æˆ¶èªè­‰ç³»çµ±

ä½†å®Œå…¨ç¨ç«‹ï¼š
- ä»£ç¢¼åº«
- æ§‹å»ºç”¢ç‰©
- éƒ¨ç½²è·¯å¾‘

## ğŸ“ æ³¨æ„äº‹é …

1. **è·¯å¾‘å·®ç•°**ï¼šå¾Œå°è·¯ç”±æ²’æœ‰ `/admin` å‰ç¶´
2. **ç«¯å£**ï¼šå¾Œå°é»˜èªä½¿ç”¨ 3001 ç«¯å£ï¼ˆå‰å°ä½¿ç”¨ 3000ï¼‰
3. **ç¨ç«‹æ§‹å»º**ï¼šéœ€è¦åˆ†åˆ¥æ§‹å»ºå‰å°å’Œå¾Œå°
4. **å…±äº«é…ç½®**ï¼šFirebase é…ç½®éœ€è¦ä¿æŒä¸€è‡´

## ğŸ› æ•…éšœæ’é™¤

### å•é¡Œï¼šç„¡æ³•è¨ªå•å¾Œå°

1. ç¢ºèªç”¨æˆ¶çš„ `role === 'admin'` åœ¨ Firestore ä¸­
2. æª¢æŸ¥ Firebase èªè­‰ç‹€æ…‹
3. æŸ¥çœ‹ç€è¦½å™¨æ§åˆ¶å°çš„éŒ¯èª¤ä¿¡æ¯

### å•é¡Œï¼šè·¯ç”±ä¸å·¥ä½œ

ç¢ºèª `AdminLayout.tsx` ä¸­çš„è·¯å¾‘å·²æ›´æ–°ï¼ˆç„¡ `/admin` å‰ç¶´ï¼‰

### å•é¡Œï¼šçµ„ä»¶æ‰¾ä¸åˆ°

ç¢ºèªæ‰€æœ‰å¿…è¦çš„çµ„ä»¶éƒ½å·²è¤‡è£½åˆ° `admin/src/components/`
